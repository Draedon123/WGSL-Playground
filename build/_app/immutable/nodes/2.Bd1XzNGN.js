import"../chunks/DsnmJJEf.js";import{i as te}from"../chunks/DT-67WTJ.js";import{J as ne,q as D,K as se,i as x,M as le,O as fe,P as ie,Q as U,R as F,T as R,U as w,V as oe,W as ue,X as O,Y as de,Z as ve,_ as ce,$ as he,A as J,a0 as G,a1 as K,a2 as me,a3 as _e,a4 as Z,a5 as pe,a6 as ge,a7 as Ee,a8 as P,a9 as j,aa as Te,ab as Ae,ac as Ie,ad as $e,ae as be,p as ye,o as xe,D as k,af as De,f as V,a as W,b as Me,ag as we,ah as Se,H as Y,F as q,G as B,B as Ce,ai as Ne,E as Re,I as Pe}from"../chunks/BbEfYca8.js";import{r as Q,s as He}from"../chunks/Dx8V9gCf.js";import{b as Oe,s as Le,a as Ue}from"../chunks/Bt-CNOKb.js";import{l as Fe,d as X}from"../chunks/DthPHJ-z.js";function Ge(i,n,e){for(var o=i.items,v=[],l=n.length,u=0;u<l;u++)Ae(n[u].e,v,!0);var _=l>0&&v.length===0&&e!==null;if(_){var c=e.parentNode;Ie(c),c.append(e),o.clear(),I(i,n[0].prev,n[l-1].next)}$e(v,()=>{for(var p=0;p<l;p++){var h=n[p];_||(o.delete(h.k),I(i,h.prev,h.next)),j(h.e,!_)}})}function Ve(i,n,e,o,v,l=null){var u=i,_={flags:n,items:new Map,first:null};D&&se();var c=null,p=!1,h=new Map,$=le(()=>{var a=e();return me(a)?a:a==null?[]:K(a)}),r,s;function t(){We(s,r,_,h,u,v,n,o,e),l!==null&&(r.length===0?c?Z(c):c=O(()=>l(u)):c!==null&&pe(c,()=>{c=null}))}ne(()=>{s??=be,r=x($);var a=r.length;if(p&&a===0)return;p=a===0;let m=!1;if(D){var b=fe(u)===ie;b!==(a===0)&&(u=U(),F(u),R(!1),m=!0)}if(D){for(var g=null,f,d=0;d<a;d++){if(w.nodeType===oe&&w.data===ue){u=w,m=!0,R(!1);break}var E=r[d],T=o(E,d);f=L(w,_,g,null,E,T,d,v,n,e),_.items.set(T,f),g=f}a>0&&F(U())}if(D)a===0&&l&&(c=O(()=>l(u)));else if(de()){var S=new Set,y=ve;for(d=0;d<a;d+=1){E=r[d],T=o(E,d);var A=_.items.get(T)??h.get(T);A?z(A,E,d):(f=L(null,_,null,null,E,T,d,v,n,e,!0),h.set(T,f)),S.add(T)}for(const[C,M]of _.items)S.has(C)||y.skipped_effects.add(M.e);y.add_callback(t)}else t();m&&R(!0),x($)}),D&&(u=w)}function We(i,n,e,o,v,l,u,_,c){var p=n.length,h=e.items,$=e.first,r=$,s,t=null,a=[],m=[],b,g,f,d;for(d=0;d<p;d+=1){if(b=n[d],g=_(b,d),f=h.get(g),f===void 0){var E=o.get(g);if(E!==void 0){o.delete(g),h.set(g,E);var T=t?t.next:r;I(e,t,E),I(e,E,T),H(E,T,v),t=E}else{var S=r?r.e.nodes_start:v;t=L(S,e,t,t===null?e.first:t.next,b,g,d,l,u,c)}h.set(g,t),a=[],m=[],r=t.next;continue}if(z(f,b,d),(f.e.f&P)!==0&&Z(f.e),f!==r){if(s!==void 0&&s.has(f)){if(a.length<m.length){var y=m[0],A;t=y.prev;var C=a[0],M=a[a.length-1];for(A=0;A<a.length;A+=1)H(a[A],y,v);for(A=0;A<m.length;A+=1)s.delete(m[A]);I(e,C.prev,M.next),I(e,t,C),I(e,M,y),r=y,t=M,d-=1,a=[],m=[]}else s.delete(f),H(f,r,v),I(e,f.prev,f.next),I(e,f,t===null?e.first:t.next),I(e,t,f),t=f;continue}for(a=[],m=[];r!==null&&r.k!==g;)(r.e.f&P)===0&&(s??=new Set).add(r),m.push(r),r=r.next;if(r===null)continue;f=r}a.push(f),t=f,r=f.next}if(r!==null||s!==void 0){for(var N=s===void 0?[]:K(s);r!==null;)(r.e.f&P)===0&&N.push(r),r=r.next;var ee=N.length;if(ee>0){var ae=null;Ge(e,N,ae)}}i.first=e.first&&e.first.e,i.last=t&&t.e;for(var re of o.values())j(re.e);o.clear()}function z(i,n,e,o){ce(i.v,n),i.i=e}function L(i,n,e,o,v,l,u,_,c,p,h){var $=(c&ge)!==0,r=(c&Ee)===0,s=$?r?J(v,!1,!1):G(v):v,t=(c&_e)===0?u:G(u),a={i:t,v:s,k:l,a:null,e:null,prev:e,next:o};try{if(i===null){var m=document.createDocumentFragment();m.append(i=he())}return a.e=O(()=>_(i,s,t,p),D),a.e.prev=e&&e.e,a.e.next=o&&o.e,e===null?h||(n.first=a):(e.next=a,e.e.next=a.e),o!==null&&(o.prev=a,o.e.prev=a.e),a}finally{}}function H(i,n,e){for(var o=i.next?i.next.e.nodes_start:e,v=n?n.e.nodes_start:e,l=i.e.nodes_start;l!==null&&l!==o;){var u=Te(l);v.before(l),l=u}}function I(i,n,e){n===null?i.first=e:(n.next=e,n.e.next=e&&e.e),e!==null&&(e.prev=n,e.e.prev=n&&n.e)}const Ye=`@fragment\r
fn main(fragment: Fragment) -> @location(0) vec4f {\r
  return vec4f(fragment.uv, 0.0, 1.0);\r
}\r
`;var qe=k("<a> </a> <br/>",1),Be=k('<main><h1>WGSL Playground</h1> <!></main>  <a style="display: none;"></a>',1);function ke(i,n){ye(n,!1);const e=()=>Ue(u,"$projects",o),[o,v]=Le();let l=J(),u=Fe(()=>X.projects.toArray().then(s=>s.sort((t,a)=>t.name.localeCompare(a.name))));xe(()=>{c(),_()});function _(){const s=location.hash.match(/#redirect=.+$/);if(s===null||s.length===0)return;const t=decodeURIComponent(s[0].split("=")[1]);we(l,x(l).href=Q("/")+t),setTimeout(()=>{x(l).click()},1)}async function c(){localStorage.getItem("hasAddedDefaultProject")===null&&(await X.projects.add({name:"Default",code:Ye}),localStorage.setItem("hasAddedDefaultProject","true"))}te();var p=Be();De(s=>{Se.title="WGSL Playground"});var h=V(p),$=Y(q(h),2);Ve($,1,e,s=>s.id,(s,t)=>{var a=qe(),m=V(a),b=q(m,!0);B(m),Ne(2),Re(g=>{He(m,"href",`${g??""}#${x(t).id??""}`),Pe(b,x(t).name)},[()=>Q("/shaders")]),W(s,a)}),B(h);var r=Y(h,2);Oe(r,s=>Ce(l,s),()=>x(l)),W(i,p),Me(),v()}export{ke as component};
